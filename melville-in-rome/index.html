---
page_nav: 'map-melville-rome'
---
<!DOCTYPE html>
<html lang="en">
<head>
{% include head.html %}
<!--
     Here's where we set things up!
-->
{% assign events = site.data.melville-model | group_by:"route" %}
<script type="text/javascript">
    // Set datajson file that matches the source data specified for {{ events }}
    var datajson = 'melville-in-rome.json';

    // Set map values for this page that will be used in script.js
    var attribution_historic = 'Map image from <a href="#">Hofstra DRC</a> via <a href=#">Source</a>';
    var attribution_mapbox = 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, Imagery Â© <a href="http://mapbox.com">Mapbox</a>';

    var tile_layer_historic = 'http://mapwarper.net/maps/tile/9175/{z}/{x}/{y}.png';
    var tile_layer_mapbox = 'https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png';

    var mapbox_id = 'clearbold.l4gjpd88';

    // Need to find a way to do this; These are on the left side of object assignment
    // [variable] worked in Firefox, but halted the JS in Chrome
    var historic_toggle_label = 'Rome 1748';
    var modern_toggle_label = 'Rome 2015';
    // So this isn't actually being used. These are set in the scripts file.

    var map_center = [41.8922136, 12.4810397];
    var map_zoom = 16;
</script>
</head>

<body class="melville-rome">
{% include header-melville-rome.html %}
<div id="map-container"><noscript>
    <p>An interactive map resides here.</p>
</noscript></div>
<div class="wrapper">
    <div class="itinerary">
        <!--
             Stick to rendering Itinerary data in HTML with Jekyll despite other JS dependencies
             so that we have a page loaded with content if JS is an issue.
        -->
        <!--
             Note that the HTML structure here is dependent on the structure of the data.
             Some data has different fields/schema.
        -->
        <h2>The Data</h2>
        <!-- <div class="project-notes">
        </div> -->

        {% for route in events %}
        {% assign i = 0 %}
        <table border="0" cellpadding="0" cellspacing="0" class="year">
            <tr>
                <th><h3>Route {{ route.name }}</h3></th>
            </tr>
        </table>
        <div class="data-table"><table border="0" cellpadding="0" cellspacing="0" width="100%" class="responsive data">
            <thead><tr>
                <th>Event</th>
                <th>Date</th>
                <th>Waypoint</th>
                <th>Location</th>
                <th>Observation</th>
                <th>Lat, Long</th>
                <th>HM Comment</th>
                <th>Editorial Note</th>
            </tr></thead>

            {% for event in route.items %}
            {% if event.type == 'w' %}{% assign i = i| plus:'1' %}{% endif %}
            <tr class="{% cycle 'odd', 'even' %} parish-{{ event.parish_id }}">
                <td>{% if event.type == 'w' %}{{ i }}{% endif %}</td>
                <td class="date" id="event-{{ i }}">{% if event.type == 'w' %}{{ event.display_date }}{% endif %}</td>
                <td td class="waypoint">{% if event.type == 'w' %}<a href="#">{{ event.waypoint }}</a>{% if event.city %}<br />({{ event.city }}){% endif %}{% endif %}</td>
                <td class="location">{% if event.type == 'l' %}{{ event.observed }}{% endif %}</td>
                <td class="observation">{% if event.type == 'o' %}{{ event.observed }}{% endif %}</td>
                <td class="coords">{% if event.latitude != null %}{{ event.latitude }}{% else %}##.#####{% endif %}, {% if event.longitude != null %}{{ event.longitude }}{% else %}##.#####{% endif %}</td>
                <td class="text">{{ event.text }}</td>
                <td class="editorial">{% if event.editorial %}{{ event.editorial }}{% else %}&#160;{% endif %}</td>
            </tr>
            {% endfor %}
        </table></div>
        {% endfor %}
        <!-- A bit of redundant entry is required to make a pure CSS solution work... -->
        <style type="text/css">
            td.date, td.coords { white-space: nowrap; }
            td { min-width: 150px; }
            td.waypoint, td.location, td.observation {
                max-width: 150px;
            }
            td.text, td.editorial { max-width: 300px; }
            @media screen and (max-width: 940px) {
                td {
                    min-width: none;
                }
                td.waypoint, td.location, td.observation,
                td.text, td.editorial { max-width: none; }
                td:nth-of-type(2):before { content: "Date"; }
                td:nth-of-type(3):before { content: "Waypoint"; }
                td:nth-of-type(4):before { content: "Location"; }
                td:nth-of-type(5):before { content: "Observation"; }
                td:nth-of-type(6):before { content: "Lat, Long"; }
                td:nth-of-type(7):before { content: "HM Comment"; }
                td:nth-of-type(8):before { content: "Editorial Note"; }
            }
        </style>
    </div>
</div>

{% include footer-melville-rome.html %}
</body>
</html>
